<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{META_TITLE}}</title>
    <meta name="description" content="{{META_DESC}}">
    {{META_KEYWORDS}}
    <meta name="theme-color" content="#050505">
    <link rel="canonical" href="{{CANONICAL_URL}}">
    <link rel="icon" href="{{FAVICON}}">
    
    <!-- 1. SYSTEM FONTS ONLY (Fastest) -->
    {{SCHEMA_BLOCK}}

    <style>
        /* --- REFERENCE COLORS & VARIABLES --- */
        :root {
            --brand-primary: #D00000;
            --brand-dark: #8a0000;
            --status-green: #00e676;
            --accent-gold: #FFD700;
            --bg-body: #050505;
            --bg-glass: rgba(18, 18, 18, 0.85);
            --border: #222;
            --text-main: #ffffff;
            --text-muted: #888;
            --cms-hero-grad: {{HERO_GRADIENT}}; 
        }

        /* --- GLOBAL RESET --- */
        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
        body { 
            margin: 0; 
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", "Roboto", "Helvetica Neue", Arial, sans-serif; 
            background: var(--bg-body); 
            color: var(--text-main); 
            font-size: 14px; 
            overflow-x: hidden; 
        }
        a { text-decoration: none; color: inherit; transition: 0.2s; }
        button { cursor: pointer; border: none; font-family: inherit; }

        /* HEADER */
        header { background: rgba(5, 5, 5, 0.95); backdrop-filter: blur(10px); border-bottom: 1px solid var(--border); height: 60px; width: 100%; position: fixed; top: 0; z-index: 100; }
        .header-container { max-width: 1100px; margin: 0 auto; height: 100%; padding: 0 15px; display: flex; align-items: center; justify-content: space-between; }
        .logo-link { display: flex; align-items: center; gap: 10px; }
        .logo-img { height: 35px; width: 35px; border-radius: 6px; object-fit: cover; box-shadow: 0 0 10px rgba(208,0,0,0.3); }
        .logo-text { font-size: 1.4rem; font-weight: 900; font-style: italic; letter-spacing: -1px; text-transform: uppercase; line-height: 1; }
        .logo-text span { color: var(--brand-primary); }
        .nav-links { display: none; gap: 20px; font-weight: 600; font-size: 0.85rem; text-transform: uppercase; color: #aaa; }
        .nav-links a:hover { color: white; }
        .hamburger { display: block; font-size: 1.4rem; color: white; background: none; }
        
        .mobile-menu { position: fixed; top: 60px; left: 0; width: 100%; background: #0f0f0f; border-bottom: 1px solid var(--border); display: none; flex-direction: column; z-index: 99; }
        .mobile-menu.active { display: flex; }
        .mobile-menu a { padding: 15px 20px; border-bottom: 1px solid #1f1f1f; font-weight: 600; }
        @media (min-width: 900px) { .nav-links { display: flex; } .hamburger { display: none; } }

        /* HERO */
        .hero { padding: 90px 15px 15px 15px; text-align: center; background: radial-gradient(circle at top, #1a0505 0%, var(--bg-body) 80%); border-bottom: 1px solid var(--border); display: {{DISPLAY_HERO}}; }
        .sys-status { display: inline-flex; align-items: center; gap: 8px; background: rgba(0, 230, 118, 0.08); border: 1px solid rgba(0, 230, 118, 0.2); padding: 5px 14px; border-radius: 20px; margin-bottom: 15px; font-size: 0.75rem; font-weight: 700; color: var(--status-green); }
        .dot { width: 6px; height: 6px; background: var(--status-green); border-radius: 50%; box-shadow: 0 0 8px var(--status-green); animation: pulse 2s infinite; }
        h1 { margin: 0 0 20px 0; font-size: 1.8rem; line-height: 1.2; color: white; font-weight: 800; }
        .entity-intro { color: #999; font-size: 0.9rem; line-height: 1.5; max-width: 800px; margin: 0 auto; }
        .cat-scroll { display: flex; gap: 10px; overflow-x: auto; padding: 10px 5px; justify-content: center; scrollbar-width: none; }
        .cat-pill { background: #111; border: 1px solid var(--border); padding: 8px 18px; border-radius: 50px; font-weight: 700; font-size: 0.8rem; white-space: nowrap; color: #ccc; }
        .cat-pill:hover, .cat-pill.active { border-color: var(--brand-primary); color: white; background: rgba(208,0,0,0.1); }
        
        .container { max-width: 1000px; margin: 0 auto; padding: 20px 15px; }

        /* MATCH ROWS */
        .sec-head { display: flex; justify-content: space-between; align-items: flex-end; margin: 30px 0 12px 0; padding-bottom: 8px; border-bottom: 1px solid #1a1a1a; }
        .sec-title { font-size: 1.1rem; font-weight: 800; color: white; display: flex; align-items: center; gap: 8px; text-transform: uppercase; }
        .live-dot { width: 8px; height: 8px; background: var(--brand-primary); border-radius: 50%; box-shadow: 0 0 10px var(--brand-primary); }
        .sec-right-link { font-size: 0.8rem; font-weight: 600; color: var(--text-muted); cursor: pointer; }
        .sec-right-link:hover { color: var(--brand-primary); text-decoration: underline; }

        .match-row { display: grid; grid-template-columns: 45px 1fr 50px 75px; align-items: center; gap: 8px; background: var(--bg-glass); border: 1px solid var(--border); border-radius: 6px; padding: 10px 8px; margin-bottom: 8px; position: relative; transition: 0.2s; }
        .match-row:hover { border-color: #444; transform: translateY(-2px); }
        .match-row.live { border-left: 3px solid var(--brand-primary); background: linear-gradient(90deg, rgba(208,0,0,0.06) 0%, rgba(20,20,20,0.8) 100%); }
        @media (min-width: 768px) { .match-row { grid-template-columns: 70px 1fr 100px 110px; padding: 15px 20px; gap: 20px; } }

        .col-time { text-align: center; display: flex; flex-direction: column; justify-content: center; gap: 2px; }
        .time-main { font-size: 0.75rem; font-weight: 700; color: white; }
        .time-sub { font-size: 0.6rem; color: #888; }
        .live-txt { color: var(--brand-primary); font-weight: 900; animation: blink 1.5s infinite; font-size: 0.65rem; }

        .teams-wrapper { display: flex; flex-direction: column; gap: 3px; overflow: hidden; }
        .league-tag { font-size: 0.6rem; color: #666; font-weight: 700; text-transform: uppercase; }
        .team-name { font-size: 0.9rem; font-weight: 600; color: white; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; display: flex; align-items: center; gap: 6px; }
        .t-logo { width: 18px; height: 18px; border-radius: 50%; display: inline-flex; align-items: center; justify-content: center; font-size: 9px; font-weight: 900; color: #fff; text-shadow: 0 1px 2px rgba(0,0,0,0.5); flex-shrink: 0; }

        .col-meta { display: flex; flex-direction: column; align-items: flex-end; gap: 3px; justify-content: center; }
        .meta-top { font-size: 0.7rem; font-weight: 700; color: var(--accent-gold); white-space: nowrap; }
        
        .col-action { margin-left: auto; width: 100%; }
        .btn-watch { background: var(--brand-primary); color: white; font-size: 0.65rem; font-weight: 800; padding: 8px 10px; border-radius: 4px; width: 100%; text-transform: uppercase; transition: 0.2s; box-shadow: 0 2px 5px rgba(0,0,0,0.5); display:flex; align-items:center; justify-content:center; gap:5px; }
        .btn-watch:hover { background: var(--brand-dark); transform: scale(1.02); }
        .hd-badge { background: rgba(0,0,0,0.3); padding: 1px 4px; border-radius: 3px; font-size: 0.55rem; border: 1px solid rgba(255,255,255,0.2); }
        
        .btn-notify { background: transparent; border: 1px solid #333; color: #888; padding: 6px 0; box-shadow: none; justify-content: center; }
        .btn-notify.active { border-color: var(--status-green); color: var(--status-green); cursor: default; }

        .show-more-btn { display: block; margin: 20px auto; background: #151515; border: 1px solid #333; color: #ccc; padding: 12px 25px; border-radius: 30px; font-weight: 600; font-size: 0.85rem; transition:0.2s; }
        .show-more-btn:hover { border-color: var(--brand-primary); color: #fff; }

        /* SEO & FOOTER LAYOUT */
        .seo-box { background: #0a0a0a; border: 1px solid var(--border); padding: 25px; border-radius: 10px; margin-top: 40px; color: #ccc; }
        
        /* New Stacked Sections */
        .section-box { margin-top: 30px; border-top: 1px solid #1a1a1a; padding-top: 20px; }
        .section-title { font-size: 0.9rem; color: #fff; font-weight: 700; margin-bottom: 15px; text-transform: uppercase; text-align: center; }
        
        .pill-grid { display: flex; flex-wrap: wrap; gap: 10px; justify-content: center; }
        .f-pill { background: #111; border: 1px solid #222; color: #888; padding: 6px 14px; border-radius: 4px; font-size: 0.8rem; }
        .f-pill:hover { border-color: var(--brand-primary); color: #fff; }

        .tag-cloud { display: flex; flex-wrap: wrap; gap: 8px; justify-content: center; max-width: 800px; margin: 0 auto; }
        .f-tag { font-size: 0.75rem; color: #666; border: 1px solid #222; padding: 4px 10px; border-radius: 20px; }
        .f-tag:hover { color: var(--brand-primary); border-color: #444; }

        .f-disclaimer { text-align: center; color: #555; font-size: 0.75rem; line-height: 1.6; max-width: 800px; margin: 0 auto; }
        
        footer { margin-top: 40px; padding: 40px 20px; background: #080808; border-top: 1px solid #222; text-align: center; }
        .footer-menu { display: flex; justify-content: center; gap: 20px; margin-bottom: 20px; flex-wrap: wrap; }
        .f-link { color: #aaa; font-size: 0.85rem; font-weight: 600; }
        .f-link:hover { color: white; }
        .copyright { color: #444; font-size: 0.7rem; }

        /* POPUPS & OVERLAYS */
        .entity-popup { position: fixed; inset: 0; background: rgba(0,0,0,0.95); z-index: 5000; display: none; flex-direction: column; justify-content: center; align-items: center; text-align: center; }
        
        /* Stream Player Modal */
        .modal { position: fixed; inset: 0; background: #050505; z-index: 2000; display: none; flex-direction: column; }

        /* --- NEW: Information Overlay Styles --- */
        .modal-info { position: fixed; inset: 0; background: rgba(0,0,0,0.85); backdrop-filter: blur(8px); z-index: 3000; display: none; align-items: center; justify-content: center; }
        .info-content { background: #111; border: 1px solid #333; padding: 40px 30px; border-radius: 12px; width: 90%; max-width: 500px; text-align: center; position: relative; box-shadow: 0 20px 50px rgba(0,0,0,0.8); }
        .close-info { position: absolute; top: 15px; right: 15px; background: none; color: #666; font-size: 1.2rem; padding: 5px; transition: 0.2s; border: none; font-weight: bold; }
        .close-info:hover { color: #fff; transform: scale(1.1); }
        .info-header { color: var(--brand-primary); font-weight: 800; text-transform: uppercase; font-size: 0.85rem; margin-bottom: 15px; letter-spacing: 1px; }
        #infoTeams { font-size: 1.6rem; margin: 0 0 20px 0; color: white; line-height: 1.3; font-weight: 700; }
        .info-meta { display: flex; flex-direction: column; gap: 8px; color: #ccc; font-size: 1rem; margin-bottom: 30px; background: #1a1a1a; padding: 15px; border-radius: 8px; }
        .meta-row { display: flex; justify-content: space-between; border-bottom: 1px solid #333; padding-bottom: 8px; margin-bottom: 8px; }
        .meta-row:last-child { border-bottom: none; padding-bottom: 0; margin-bottom: 0; }
        .btn-watch-lg { background: var(--brand-primary); color: white; font-size: 1.1rem; font-weight: 800; padding: 16px 30px; border-radius: 8px; width: 100%; text-transform: uppercase; transition: 0.2s; box-shadow: 0 4px 15px rgba(208,0,0,0.4); display: flex; align-items: center; justify-content: center; gap: 10px; }
        .btn-watch-lg:hover { background: var(--brand-dark); transform: scale(1.02); }

        @keyframes blink { 0%, 100% {opacity:1;} 50% {opacity:0.4;} }
        @keyframes pulse { 0% { opacity: 1; } 50% { opacity: 0.4; } 100% { opacity: 1; } }
    </style>
</head>
<body>
    <header>
        <div class="header-container">
            <a href="/" class="logo-link">{{LOGO_HTML}}</a>
            <nav class="nav-links">{{HEADER_MENU}}</nav>
            <button class="hamburger" onclick="toggleMenu()">‚ò∞</button>
        </div>
    </header>
    <div class="mobile-menu" id="mobileMenu">{{HEADER_MENU}}</div>

    <div class="hero">
        <div class="sys-status"><div class="dot"></div> System Status: Online</div>
        <h1>{{H1_TITLE}}</h1>
        <p class="entity-intro">{{HERO_TEXT}}</p>
        <div class="cat-scroll">{{HERO_PILLS}}</div>
    </div>

    <div class="container">
        <!-- LIVE MATCHES -->
        <div id="live-section">
            <div class="sec-head"><div class="sec-title"><div class="live-dot"></div> Trending Live</div><div class="sec-right-link" id="live-count">Loading...</div></div>
            <div id="trending-list" class="match-list"></div>
            <button id="show-more-live" class="show-more-btn" style="display:none">Show More Matches ‚ñº</button>
            <div id="hidden-live-list" class="match-list" style="display:none; margin-top:10px;"></div>
        </div>
        
        <!-- UPCOMING -->
        <div id="upcoming-container"></div>
        
        <!-- ARTICLE -->
        <div class="seo-box">{{ARTICLE_CONTENT}}</div>

        <!-- POPULAR LEAGUES (Stacked) -->
        <div class="section-box">
            <div class="section-title">Popular Leagues</div>
            <div class="pill-grid">{{FOOTER_LEAGUES}}</div>
        </div>

        <!-- POPULAR SEARCHES (Stacked) -->
        <div class="section-box">
            <div class="section-title">Popular Searches</div>
            <div class="tag-cloud">
                <a href="#" class="f-tag">NBA Streams</a>
                <a href="#" class="f-tag">NFL Live</a>
                <a href="#" class="f-tag">UFC PPV Free</a>
                <a href="#" class="f-tag">MethStreams</a>
                <a href="#" class="f-tag">CrackStreams</a>
                <a href="#" class="f-tag">StreamEast</a>
                <a href="#" class="f-tag">MLB Network</a>
            </div>
        </div>

        <!-- DISCLAIMER (Stacked) -->
        <div class="section-box">
             <div class="f-disclaimer">{{FOOTER_DISCLAIMER}}</div>
        </div>

    </div>

    <footer>
        <div class="footer-menu">{{FOOTER_STATIC}}</div>
        <div class="copyright">{{FOOTER_COPYRIGHT}}</div>
    </footer>

    <!-- Entity Popup (CMS Feature) -->
    <div id="entityPopup" class="entity-popup">
        <h3 id="entityPopupTitle" style="color:#fff; margin-bottom:10px;">Searching...</h3>
        <p style="color:#888;">Checking stream availability...</p>
    </div>

    <!-- PLAYER CONTAINER (Stream Overlay) -->
    <div id="streamModal" class="modal"></div>

    <!-- NEW: MATCH INFO OVERLAY -->
    <div id="infoModal" class="modal-info">
        <div class="info-content">
            <button class="close-info" onclick="closeInfoModal()">‚úï</button>
            <div class="info-header">Match Information</div>
            <h2 id="infoTeams">Loading...</h2>
            <div class="info-meta">
                <div class="meta-row"><span>üìÖ Date</span> <span id="infoDate">-</span></div>
                <div class="meta-row"><span>‚è± Status</span> <span id="infoStatus" style="color:var(--brand-primary); font-weight:700;">-</span></div>
            </div>
            <button id="infoWatchBtn" class="btn-watch-lg">üì∫ WATCH STREAM</button>
        </div>
    </div>

    <script>
        const API_URL = "https://vercelapi-olive.vercel.app/api/sync-nodes";
        const TARGET_COUNTRY = "{{TARGET_COUNTRY}}"; 
        const PRIORITIES = {{JS_PRIORITIES}}; 
        const SITE_DOMAIN = "https://{{DOMAIN}}";

        let allMatches = [];
        window.MATCH_DATA = {}; 

        window.addEventListener('DOMContentLoaded', () => {
            loadMatches();
        });

        async function loadMatches() {
            try {
                const res = await fetch(`${API_URL}?country=${TARGET_COUNTRY.toLowerCase()}`);
                const data = await res.json();
                allMatches = data.matches;
                document.getElementById('live-count').innerText = `‚óè ${data.matches.filter(m => m.is_live).length} Live Matches`;
                injectDynamicSchema(data.seo);
                renderApp(data.matches);
            } catch(e) { console.error(e); }
        }

        function renderApp(matches) {
            window.MATCH_DATA = {};
            matches.forEach(m => window.MATCH_DATA[m.id] = m);

            // 1. Separate Live vs Upcoming
            const liveMatches = matches.filter(m => m.is_live);
            const now = Date.now();
            const oneDay = 24 * 60 * 60 * 1000;
            const upcomingMatches = matches.filter(m => !m.is_live && (m.startTimeUnix - now) < oneDay);

            renderLiveSection(liveMatches);
            renderUpcomingGrouped(upcomingMatches);

            // ---------------------------------------------------------
            // 2. UPDATED ROUTING LOGIC
            // ---------------------------------------------------------
            
            // PRIORITY 1: Check for PLAYER Link (/watch/?sport=ID)
            const params = new URLSearchParams(window.location.search);
            const playerTarget = params.get('sport');

            if (playerTarget && window.MATCH_DATA[playerTarget]) {
                openPlayer(playerTarget, false); // Direct to Player
                return; // Stop processing (don't check hash)
            }

            // PRIORITY 2: Check for INFO Link (/#ID)
            const infoTarget = window.location.hash.replace('#', '');
            
            if (infoTarget && window.MATCH_DATA[infoTarget]) {
                openInfoModal(infoTarget); // Show Info Overlay
            }
            // ---------------------------------------------------------
        }

        function renderLiveSection(matches) {
            const topList = document.getElementById('trending-list');
            const hiddenList = document.getElementById('hidden-live-list');
            const btn = document.getElementById('show-more-live');
            topList.innerHTML = ''; hiddenList.innerHTML = ''; btn.style.display='none';
            if (matches.length === 0) { topList.innerHTML = '<div style="text-align:center; padding:30px; color:#444;">No live matches currently.</div>'; return; }
            
            matches.slice(0, 5).forEach(m => topList.appendChild(createMatchRow(m, null)));
            if (matches.length > 5) {
                matches.slice(5).forEach(m => hiddenList.appendChild(createMatchRow(m, null)));
                btn.style.display = 'block'; btn.innerText = `Show ${matches.length - 5} More Matches ‚ñº`;
                btn.onclick = () => { hiddenList.style.display='block'; btn.style.display='none'; };
            }
        }

        function renderUpcomingGrouped(matches) {
            const container = document.getElementById('upcoming-container');
            container.innerHTML = '';

            const allGroups = {};

            matches.forEach(m => {
                const hiddenKey = Object.keys(PRIORITIES).find(k => {
                    if(!PRIORITIES[k].isHidden) return false;
                    const txt = (m.league + " " + m.sport).toLowerCase();
                    return txt.includes(k.toLowerCase());
                });
                if(hiddenKey) return;

                const prioKey = Object.keys(PRIORITIES).find(k => {
                    const txt = (m.league + " " + m.sport).toLowerCase();
                    return txt.includes(k.toLowerCase());
                });

                let groupKey = "";
                let groupScore = 0;
                let isPriority = false;
                let hasLink = false;
                let iconKey = "";

                if (prioKey) {
                    groupKey = prioKey;
                    groupScore = PRIORITIES[prioKey].score;
                    isPriority = true;
                    hasLink = PRIORITIES[prioKey].hasLink;
                    iconKey = prioKey;
                } else {
                    const sportRaw = m.sport || "General";
                    groupKey = toTitleCase(sportRaw); 
                    groupScore = 0;
                    isPriority = false;
                    hasLink = false;
                    iconKey = groupKey;
                }

                if (!allGroups[groupKey]) {
                    allGroups[groupKey] = {
                        name: groupKey,
                        score: groupScore,
                        matches: [],
                        isLeague: isPriority,
                        hasLink: hasLink,
                        iconKey: iconKey
                    };
                }
                allGroups[groupKey].matches.push(m);
            });

            const sortedGroups = Object.values(allGroups).sort((a,b) => b.score - a.score);

            sortedGroups.forEach(group => {
                group.matches.sort((a,b) => a.startTimeUnix - b.startTimeUnix);
                createSection(container, group.name, group.matches, group.hasLink, group.iconKey, group.isLeague);
            });
        }

        function createSection(container, title, matches, hasLink, iconKey, isPrioritySection) {
            const section = document.createElement('div');
            let linkHtml = '';
            if (hasLink) {
                const slug = iconKey.toLowerCase().replace(/ /g, '-').replace(/[^a-z0-9-]/g, '');
                linkHtml = `<a href="/${slug}/" class="sec-right-link">View All ></a>`;
            }

            section.innerHTML = `<div class="sec-head"><div class="sec-title">${getSportIcon(iconKey)} Upcoming ${title}</div>${linkHtml}</div>`;
            const list = document.createElement('div');
            matches.forEach(m => list.appendChild(createMatchRow(m, isPrioritySection ? title : null)));
            section.appendChild(list);
            container.appendChild(section);
        }

        function createMatchRow(m, priorityContext) {
            const div = document.createElement('div');
            div.className = m.is_live ? 'match-row live' : 'match-row';
            
            let timeCol;
            if (m.is_live) {
                timeCol = `<span class="live-txt">LIVE</span><span class="time-sub">${m.status_text || "Now"}</span>`;
            } else { 
                const parts = m.formatted_date.split('‚Ä¢'); 
                timeCol = `<span class="time-main">${parts[1] || ''}</span><span class="time-sub">${parts[0]}</span>`; 
            }

            let teamsHtml = '';
            const tA = m.team_a; const tB = m.team_b;
            if (!tB) {
                teamsHtml = `<div class="team-name" style="font-size:1rem;"><span class="t-logo" style="background:${getColor(m.team_a_letter||'T')}">${m.team_a_letter||'T'}</span> ${tA}</div>`;
            } else {
                teamsHtml = `
                <div class="team-name"><span class="t-logo" style="background:${getColor(m.team_a_letter||'T')}">${m.team_a_letter||'T'}</span> ${tA}</div>
                <div class="team-name"><span class="t-logo" style="background:${getColor(m.team_b_letter||'T')}">${m.team_b_letter||'T'}</span> ${tB}</div>`;
            }

            let tagText = "";
            if (priorityContext) {
                tagText = m.sport.toUpperCase();
            } else {
                tagText = m.league || m.tournament || m.sport;
            }

            let metaHtml = '', actionHtml = '';
            if (m.is_live) {
                metaHtml = `<div class="meta-top">${m.live_viewers || 'N/A'}</div>`;
                // WATCH BUTTON calls openPlayer DIRECTLY
                actionHtml = `<button class="btn-watch" onclick="openPlayer('${m.id}', false)">WATCH <span class="hd-badge">HD</span></button>`;
            } else {
                metaHtml = `<div class="meta-top" style="color:#aaa; font-weight:400;">${m.status_text}</div>`;
                actionHtml = `<button class="btn-watch btn-notify" onclick="this.innerHTML='‚úì SET'; this.classList.add('active');">üîî NOTIFY</button>`;
            }

            div.innerHTML = `<div class="col-time">${timeCol}</div><div class="teams-wrapper"><div class="league-tag">${tagText}</div>${teamsHtml}</div><div class="col-meta">${metaHtml}</div><div class="col-action">${actionHtml}</div>`;
            return div;
        }

        // --- NEW INFO OVERLAY LOGIC ---
        function openInfoModal(matchId) {
            const m = window.MATCH_DATA[matchId];
            if(!m) return; // Should likely show a 'expired' msg but for now just return

            document.getElementById('infoTeams').innerHTML = m.team_b ? `${m.team_a} <span style="color:#666; font-size:0.8em;">vs</span> ${m.team_b}` : m.team_a;
            document.getElementById('infoDate').innerText = m.formatted_date;
            document.getElementById('infoStatus').innerText = m.is_live ? "LIVE NOW üî•" : m.status_text;
            
            // The Watch button inside the info overlay opens the actual player
            document.getElementById('infoWatchBtn').onclick = function() {
                closeInfoModal();
                openPlayer(matchId, false);
            };

            document.getElementById('infoModal').style.display = 'flex';
        }

        function closeInfoModal() {
            document.getElementById('infoModal').style.display = 'none';
            // Clear hash silently
            history.replaceState(null, null, ' ');
        }

        // --- EXISTING PLAYER LOGIC ---
        function openPlayer(matchId, startLocked) {
            const m = window.MATCH_DATA[matchId];
            if(!m) return alert("Match expired or not found.");
            if(window.initPlayer) {
                window.initPlayer(m, startLocked);
            } else {
                const script = document.createElement('script');
                script.src = 'assets/player.js';
                script.onload = () => window.initPlayer(m, startLocked);
                document.body.appendChild(script);
            }
        }
        
        function toTitleCase(str) { return str.replace(/\w\S*/g, function(txt){return txt.charAt(0).toUpperCase() + txt.substr(1).toLowerCase();}); }
        function injectDynamicSchema(seoData) { if(!seoData) return; let jsonStr = JSON.stringify(seoData).replace(/https:\/\/example\.com/g, SITE_DOMAIN); const script = document.createElement('script'); script.type = 'application/ld+json'; script.text = jsonStr; document.head.appendChild(script); }
        function getSportIcon(n) { n=(n||"").toLowerCase(); if(n.includes('soccer')||n.includes('premier')||n.includes('league')) return '‚öΩ'; if(n.includes('basket')||n.includes('nba')) return 'üèÄ'; if(n.includes('football')||n.includes('nfl')) return 'üèà'; if(n.includes('baseball')||n.includes('mlb')) return '‚öæ'; if(n.includes('ufc')||n.includes('mma')||n.includes('boxing')) return 'ü•ä'; if(n.includes('hockey')||n.includes('nhl')) return 'üèí'; if(n.includes('f1')||n.includes('motor')) return 'üèéÔ∏è'; if(n.includes('cricket')||n.includes('ashes')) return 'üèè'; return 'üèÜ'; }
        function getColor(char) { const c = ['#e53935','#d81b60','#8e24aa','#5e35b1','#3949ab','#1e88e5','#039be5','#00897b','#43a047','#7cb342','#c0ca33','#fdd835','#fb8c00']; return c[char.charCodeAt(0) % c.length]; }
        function toggleMenu() { document.getElementById('mobileMenu').classList.toggle('active'); }
    </script>
</body>
</html>
