<!DOCTYPE html>
<html lang="en-US">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>dgdfgd</title>
    <meta name="description" content="dgdfgdgdgd">
    
    <meta name="theme-color" content="#050505">
    <link rel="canonical" href="https://crackstreams.help/nba">
    <link rel="icon" href="">
    
    <!-- 1. SYSTEM FONTS & SMOOTH SCROLL -->
    <style>html { scroll-behavior: smooth; }</style>
    

    <style>
        /* --- GLOBAL VARIABLES --- */
        :root {
            --brand-primary: #D00000;
            --brand-dark: #8a0000;
            --status-green: #00e676;
            --accent-gold: #FFD700;
            --bg-body: #050505;
            --bg-panel: #0f0f0f;
            --bg-glass: rgba(18, 18, 18, 0.85);
            --border: #222;
            --text-main: #ffffff;
            --text-muted: #888;
            --cms-hero-grad: ; 
        }

        /* --- RESET --- */
        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
        body { 
            margin: 0; 
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", "Roboto", "Helvetica Neue", Arial, sans-serif; 
            background: var(--bg-body); 
            color: var(--text-main); 
            font-size: 14px; 
            overflow-x: hidden; 
            padding-bottom: 60px; /* Space for mobile sticky footer */
        }
        a { text-decoration: none; color: inherit; transition: 0.2s; }
        button { cursor: pointer; border: none; font-family: inherit; }
        ul { list-style: none; padding: 0; margin: 0; }

        /* --- SKELETON LOADING (CLS Fix) --- */
        .skeleton { background: #111; border-radius: 4px; animation: shimmer 1.5s infinite linear; background: linear-gradient(to right, #111 4%, #1a1a1a 25%, #111 36%); background-size: 1000px 100%; }
        /* Specific Header Skeleton */
        .skeleton-header { display: flex; justify-content: space-between; align-items: flex-end; margin: 30px 0 12px 0; padding-bottom: 8px; border-bottom: 1px solid #1a1a1a; }
        .sk-title { height: 20px; width: 140px; }
        .sk-count { height: 15px; width: 80px; }
        
        .skeleton-box { height: 72px; width: 100%; margin-bottom: 8px; border-radius: 6px; border: 1px solid #1a1a1a; }
        @keyframes shimmer { 0% { background-position: -1000px 0; } 100% { background-position: 1000px 0; } }

        /* --- HEADER --- */
        header { background: rgba(5, 5, 5, 0.95); backdrop-filter: blur(10px); border-bottom: 1px solid var(--border); height: 60px; width: 100%; position: fixed; top: 0; z-index: 100; }
        .header-container { max-width: 1200px; margin: 0 auto; height: 100%; padding: 0 15px; display: flex; align-items: center; justify-content: space-between; }
        .logo-link { display: flex; align-items: center; gap: 10px; }
        .logo-img { height: 35px; width: 35px; border-radius: 6px; object-fit: cover; box-shadow: 0 0 10px rgba(208,0,0,0.3); }
        .logo-text { font-size: 1.4rem; font-weight: 900; font-style: italic; letter-spacing: -1px; text-transform: uppercase; line-height: 1; }
        .logo-text span { color: var(--brand-primary); }
        .nav-links { display: none; gap: 20px; font-weight: 600; font-size: 0.85rem; text-transform: uppercase; color: #aaa; }
        .nav-links a:hover, .nav-links a.active { color: white; border-bottom: 2px solid var(--brand-primary); }
        .hamburger { display: block; font-size: 1.4rem; color: white; background: none; }
        
        .mobile-menu { position: fixed; top: 60px; left: 0; width: 100%; background: #0f0f0f; border-bottom: 1px solid var(--border); display: none; flex-direction: column; z-index: 99; }
        .mobile-menu.active { display: flex; }
        .mobile-menu a { padding: 15px 20px; border-bottom: 1px solid #1f1f1f; font-weight: 600; color: #ccc; }
        .mobile-menu a.active { color: var(--brand-primary); border-left: 4px solid var(--brand-primary); }
        @media (min-width: 900px) { .nav-links { display: flex; } .hamburger { display: none; } }

        /* --- REQ #9: SOCIAL SIDEBAR (Professional) --- */
        .social-sidebar { position: fixed; left: 0; top: 50%; transform: translateY(-50%); z-index: 90; display: flex; flex-direction: column; gap: 8px; background: rgba(10,10,10,0.95); border: 1px solid var(--border); border-left: none; padding: 12px 8px; border-radius: 0 8px 8px 0; box-shadow: 4px 0 15px rgba(0,0,0,0.6); backdrop-filter: blur(5px); }
        .social-btn { width: 50px; height: auto; padding: 8px 0; display: flex; flex-direction: column; align-items: center; justify-content: center; gap: 4px; color: #888; border-radius: 6px; transition: 0.2s; background: transparent; border: 1px solid transparent; }
        .social-btn svg { width: 22px; height: 22px; fill: currentColor; transition: 0.2s; }
        .social-btn:hover { background: #222; color: white; border-color: #333; transform: translateX(2px); }
        .social-btn:hover svg { fill: var(--brand-primary); }
        .s-count { font-size: 0.65rem; font-weight: 700; color: #666; font-family: sans-serif; }
        
        /* Mobile Sticky Footer for Socials */
        @media (max-width: 768px) {
            .social-sidebar { top: auto; bottom: 0; left: 0; right: 0; transform: none; flex-direction: row; width: 100%; border-radius: 0; border: none; border-top: 1px solid var(--border); background: #050505; justify-content: space-evenly; padding: 5px; height: 55px; gap: 0; }
            .social-btn { height: 100%; width: auto; padding: 0 10px; border: none; }
            .social-btn:hover { background: transparent; transform: none; color: var(--brand-primary); }
        }

        /* --- HERO --- */
        .hero { padding: 90px 15px 15px 15px; text-align: center; background: radial-gradient(circle at top, #1a0505 0%, var(--bg-body) 80%); border-bottom: 1px solid var(--border); display: none; }
        .sys-status { display: inline-flex; align-items: center; gap: 8px; background: rgba(0, 230, 118, 0.08); border: 1px solid rgba(0, 230, 118, 0.2); padding: 5px 14px; border-radius: 20px; margin-bottom: 15px; font-size: 0.75rem; font-weight: 700; color: var(--status-green); }
        .dot { width: 6px; height: 6px; background: var(--status-green); border-radius: 50%; box-shadow: 0 0 8px var(--status-green); animation: pulse 2s infinite; }
        h1 { margin: 0 0 20px 0; font-size: 1.8rem; line-height: 1.2; color: white; font-weight: 800; }
        .entity-intro { color: #999; font-size: 0.9rem; line-height: 1.5; max-width: 800px; margin: 0 auto; }
        .cat-scroll { display: flex; gap: 10px; overflow-x: auto; padding: 10px 5px; justify-content: center; scrollbar-width: none; }
        .cat-pill { background: #111; border: 1px solid var(--border); padding: 8px 18px; border-radius: 50px; font-weight: 700; font-size: 0.8rem; white-space: nowrap; color: #ccc; }
        .cat-pill:hover, .cat-pill.active { border-color: var(--brand-primary); color: white; background: rgba(208,0,0,0.1); }
        
        .container { max-width: 1100px; margin: 0 auto; padding: 20px 15px; min-height: 60vh; }

        /* --- MATCH ROWS --- */
        .sec-head { display: flex; justify-content: space-between; align-items: flex-end; margin: 30px 0 12px 0; padding-bottom: 8px; border-bottom: 1px solid #1a1a1a; }
        .sec-title { font-size: 1.1rem; font-weight: 800; color: white; display: flex; align-items: center; gap: 8px; text-transform: uppercase; }
        .live-dot { width: 8px; height: 8px; background: var(--brand-primary); border-radius: 50%; box-shadow: 0 0 10px var(--brand-primary); }
        .sec-right-link { font-size: 0.8rem; font-weight: 600; color: var(--text-muted); cursor: pointer; }
        .sec-right-link:hover { color: var(--brand-primary); text-decoration: underline; }

        .match-row { display: grid; grid-template-columns: 45px 1fr 50px 75px; align-items: center; gap: 8px; background: var(--bg-glass); border: 1px solid var(--border); border-radius: 6px; padding: 10px 8px; margin-bottom: 8px; position: relative; transition: 0.2s; }
        .match-row:hover { border-color: #444; transform: translateY(-2px); }
        .match-row.live { border-left: 3px solid var(--brand-primary); background: linear-gradient(90deg, rgba(208,0,0,0.06) 0%, rgba(20,20,20,0.8) 100%); }
        @media (min-width: 768px) { .match-row { grid-template-columns: 70px 1fr 100px 110px; padding: 15px 20px; gap: 20px; } }

        .col-time { text-align: center; display: flex; flex-direction: column; justify-content: center; gap: 2px; }
        .time-main { font-size: 0.75rem; font-weight: 700; color: white; }
        .time-sub { font-size: 0.6rem; color: #888; }
        .live-txt { color: var(--brand-primary); font-weight: 900; animation: blink 1.5s infinite; font-size: 0.65rem; }

        .teams-wrapper { display: flex; flex-direction: column; gap: 3px; overflow: hidden; }
        .league-tag { font-size: 0.6rem; color: #94a3b8; font-weight: 700; text-transform: uppercase; letter-spacing: 0.5px; }
        
        /* REQ #10: Updated Font Sizes (All Teams 0.7rem Mobile) */
        .team-name { font-size: 0.7rem; font-weight: 600; color: white; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; display: flex; align-items: center; gap: 6px; }
        @media (min-width: 768px) { .team-name { font-size: 0.9rem; } }
        
        .t-logo { width: 18px; height: 18px; border-radius: 50%; display: inline-flex; align-items: center; justify-content: center; font-size: 9px; font-weight: 900; color: #fff; text-shadow: 0 1px 2px rgba(0,0,0,0.5); flex-shrink: 0; }

        .col-meta { display: flex; flex-direction: column; align-items: flex-end; gap: 3px; justify-content: center; }
        .meta-top { font-size: 0.7rem; font-weight: 700; color: var(--accent-gold); white-space: nowrap; }
        
        .col-action { margin-left: auto; width: 100%; }
        .btn-watch { background: var(--brand-primary); color: white; font-size: 0.65rem; font-weight: 800; padding: 8px 10px; border-radius: 4px; width: 100%; text-transform: uppercase; transition: 0.2s; box-shadow: 0 2px 5px rgba(0,0,0,0.5); display:flex; align-items:center; justify-content:center; gap:5px; }
        .btn-watch:hover { background: var(--brand-dark); transform: scale(1.02); }
        .hd-badge { background: rgba(0,0,0,0.3); padding: 1px 4px; border-radius: 3px; font-size: 0.55rem; border: 1px solid rgba(255,255,255,0.2); }
        .btn-notify { background: transparent; border: 1px solid #333; color: #888; padding: 6px 0; box-shadow: none; justify-content: center; }
        .btn-notify.active { border-color: var(--status-green); color: var(--status-green); cursor: default; }

        /* REQ #2 ("Show More" Styles) */
        .show-more-btn { display: block; width: 100%; max-width: 300px; margin: 20px auto; background: #151515; border: 1px solid #333; color: #ccc; padding: 12px; border-radius: 30px; font-weight: 600; font-size: 0.85rem; transition:0.2s; cursor: pointer; }
        .show-more-btn:hover { border-color: var(--brand-primary); color: #fff; background: #1a1a1a; }

        /* POPULAR LEAGUES */
        .leagues-grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 10px; margin-top: 15px; }
        @media (min-width: 600px) { .leagues-grid { grid-template-columns: repeat(4, 1fr); } }
        
        .league-card { background: #111; border: 1px solid var(--border); padding: 15px; border-radius: 6px; display: flex; align-items: center; gap: 10px; transition: 0.2s; }
        .league-card:hover { border-color: var(--brand-primary); transform: translateY(-3px); background: #151515; }
        .league-card span { font-size: 0.85rem; font-weight: 600; color: #ddd; }
        .l-icon { font-size: 1.2rem; }

        /* TRUSTED PARTNERS & FOOTER */
        .partners-box { background: #0a0a0a; border: 1px solid var(--border); padding: 25px; border-radius: 8px; text-align: center; margin-top: 40px; }
        .partner-tags { display: flex; flex-wrap: wrap; gap: 8px; justify-content: center; margin-top: 15px; }
        .p-tag { background: #111; border: 1px solid #222; color: #888; padding: 6px 14px; border-radius: 4px; font-size: 0.8rem; cursor: pointer; transition: 0.2s; }
        .p-tag:hover { border-color: var(--brand-primary); color: white; }

        footer { background: #020202; border-top: 1px solid var(--border); padding: 50px 20px; margin-top: 60px; }
        .footer-grid { display: grid; grid-template-columns: 1fr; gap: 30px; max-width: 1000px; margin: 0 auto; text-align: center; }
        @media(min-width: 768px) { .footer-grid { grid-template-columns: 1fr 1fr; text-align: left; } .footer-grid div:last-child { text-align: right; } }
        
        .f-brand h2 { margin: 0 0 10px 0; font-style: italic; text-transform: uppercase; }
        .f-desc { color: #666; font-size: 0.8rem; line-height: 1.6; max-width: 400px; margin: 0 auto; }
        @media(min-width: 768px) { .f-desc { margin: 0; } }

        .f-links { display: flex; flex-direction: column; gap: 10px; }
        .f-link { color: #888; font-size: 0.85rem; font-weight: 500; }
        .f-link:hover { color: var(--brand-primary); }
        .copyright { margin-top: 40px; border-top: 1px solid #111; padding-top: 20px; text-align: center; font-size: 0.75rem; color: #444; }

        /* BACK TO TOP */
        .back-to-top { position: fixed; bottom: 80px; right: 20px; background: var(--brand-primary); width: 40px; height: 40px; border-radius: 50%; display: flex; align-items: center; justify-content: center; color: white; cursor: pointer; opacity: 0; visibility: hidden; transition: 0.3s; z-index: 90; box-shadow: 0 4px 10px rgba(0,0,0,0.5); }
        .back-to-top.show { opacity: 1; visibility: visible; }
        .back-to-top svg { width: 24px; height: 24px; fill: white; }
        @media (min-width: 768px) { .back-to-top { bottom: 30px; } }

        /* MODALS */
        .modal { position: fixed; inset: 0; background: #050505; z-index: 2000; display: none; flex-direction: column; }
        .modal-info { position: fixed; inset: 0; background: rgba(0,0,0,0.85); backdrop-filter: blur(8px); z-index: 3000; display: none; align-items: center; justify-content: center; }
        .info-content { background: #111; border: 1px solid #333; padding: 40px 30px; border-radius: 12px; width: 90%; max-width: 500px; text-align: center; position: relative; box-shadow: 0 20px 50px rgba(0,0,0,0.8); }
        .close-info { position: absolute; top: 15px; right: 15px; background: none; color: #666; font-size: 1.2rem; padding: 5px; transition: 0.2s; border: none; font-weight: bold; }
        .close-info:hover { color: #fff; transform: scale(1.1); }
        .info-header { color: var(--brand-primary); font-weight: 800; text-transform: uppercase; font-size: 0.85rem; margin-bottom: 15px; letter-spacing: 1px; }
        #infoTeams { font-size: 1.6rem; margin: 0 0 20px 0; color: white; line-height: 1.3; font-weight: 700; }
        .info-meta { display: flex; flex-direction: column; gap: 8px; color: #ccc; font-size: 1rem; margin-bottom: 30px; background: #1a1a1a; padding: 15px; border-radius: 8px; }
        .meta-row { display: flex; justify-content: space-between; border-bottom: 1px solid #333; padding-bottom: 8px; margin-bottom: 8px; }
        .meta-row:last-child { border-bottom: none; padding-bottom: 0; margin-bottom: 0; }
        .btn-watch-lg { background: var(--brand-primary); color: white; font-size: 1.1rem; font-weight: 800; padding: 16px 30px; border-radius: 8px; width: 100%; text-transform: uppercase; transition: 0.2s; box-shadow: 0 4px 15px rgba(208,0,0,0.4); display: flex; align-items: center; justify-content: center; gap: 10px; }

        /* REQ #5: Standard Size Overlay with H3 for SEO */
        .search-overlay { position: fixed; inset: 0; background: rgba(5,5,5,0.9); backdrop-filter: blur(8px); z-index: 5000; display: none; align-items: center; justify-content: center; }
        .search-modal-box { width: 90%; max-width: 500px; background: #0f0f0f; border: 1px solid #333; padding: 40px; border-radius: 12px; text-align: center; box-shadow: 0 20px 50px rgba(0,0,0,0.8); }
        .search-loader { width: 50px; height: 50px; border: 4px solid #222; border-top-color: var(--brand-primary); border-radius: 50%; animation: spin 1s infinite linear; margin: 0 auto 20px auto; }
        @keyframes spin { to { transform: rotate(360deg); } }
        /* H3 Keyword */
        .search-keyword-h3 { font-size: 1.4rem; font-weight: 700; color: #fff; margin: 0 0 15px 0; line-height: 1.3; }
        .search-keyword-h3 span { color: var(--brand-primary); }
        .search-sub-text { font-size: 0.9rem; color: #888; margin-bottom: 5px; }
        .found-box { margin-top: 25px; padding-top: 20px; border-top: 1px solid #222; opacity: 0; transform: translateY(10px); transition: 0.3s; }
        .found-box.active { opacity: 1; transform: translateY(0); }
        .best-alt-msg { font-size: 0.95rem; color: #ccc; margin-bottom: 10px; }
        .best-alt-msg strong { color: #fff; }
        .redirect-msg { font-size: 0.8rem; color: var(--status-green); font-weight: 700; text-transform: uppercase; letter-spacing: 1px; }

        @keyframes blink { 0%, 100% {opacity:1;} 50% {opacity:0.4;} }
        @keyframes pulse { 0% { opacity: 1; } 50% { opacity: 0.4; } 100% { opacity: 1; } }
    </style>
<style>#live-section, #upcoming-container { display: none !important; }</style></head>
<body>
    
    <!-- SOCIAL SIDEBAR -->
    <div id="socialSidebar" class="social-sidebar"></div>

    <header>
        <div class="header-container">
            <a href="/" class="logo-link"><img src="/assets/streameast-logo-hd.jpg" class="logo-img"> <div class="logo-text">Stream<span>East</span></div></a>
            <nav class="nav-links" id="desktopNav"><a href="#">Schedule</a><a href="/#faqs">FAQs</a></nav>
            <button class="hamburger" onclick="toggleMenu()">‚ò∞</button>
        </div>
    </header>
    <div class="mobile-menu" id="mobileMenu"><a href="#">Schedule</a><a href="/#faqs">FAQs</a></div>

    <div class="hero">
        <div class="sys-status"><div class="dot"></div> System Status: Online</div>
        <h1>Streameast - #1 NBA Streaming Site</h1>
        <p class="entity-intro">dgdfgdgdgd</p>
        <div class="cat-scroll"><a href="#" class="cat-pill">‚öæ MLB</a><a href="/nba" class="cat-pill">üèÄ NBA</a></div>
    </div>

    <div class="container">
        
        <!-- REQ #12: Layout Shift 0 - Skeleton for Header & Content -->
        <div id="live-section">
            <!-- Header Skeleton -->
            <div id="live-sk-head" class="skeleton skeleton-header">
                <div class="sk-title"></div><div class="sk-count"></div>
            </div>
            <!-- Match Skeletons -->
            <div id="live-skeleton">
                <div class="skeleton skeleton-box"></div>
                <div class="skeleton skeleton-box"></div>
            </div>

            <!-- Actual Content (Hidden initially) -->
            <div id="live-content-wrapper" style="display:none;">
                <div class="sec-head">
                    <div class="sec-title"><div class="live-dot"></div> Trending Live</div>
                    <div class="sec-right-link" id="live-count"></div>
                </div>
                <div id="trending-list" class="match-list"></div>
                <button id="show-more-live" class="show-more-btn" style="display:none">Show More Matches ‚ñº</button>
                <div id="hidden-live-list" class="match-list" style="display:none; margin-top:10px;"></div>
            </div>
        </div>
        
        <!-- UPCOMING -->
        <div id="upcoming-skeleton" style="margin-top:40px;">
             <div class="skeleton skeleton-header">
                <div class="sk-title"></div>
             </div>
             <div class="skeleton skeleton-box"></div>
             <div class="skeleton skeleton-box"></div>
        </div>
        <div id="upcoming-container"></div>
        
        <!-- ARTICLE -->
        <div class="seo-box" style="margin-top:40px; color:#aaa; font-size:0.9rem; line-height:1.6;"></div>

        <!-- POPULAR LEAGUES -->
        <div class="section-box" style="margin-top:50px;">
            <div class="sec-head"><div class="sec-title">üèÜ Popular Leagues</div></div>
            <div class="leagues-grid">
                
            <a href="/contact" class="league-card">
                <span class="l-icon">üèÜ</span>
                <span>Contact</span>
            </a>
            <a href="/#soccer" class="league-card">
                <span class="l-icon">‚öΩ</span>
                <span>Soccer</span>
            </a> 
            </div>
        </div>

        <!-- TRUSTED PARTNERS -->
        <div class="partners-box">
            <h3 style="margin:0; color:#fff; text-transform:uppercase;">Trusted Partners</h3>
            <p style="font-size:0.8rem; color:#666; margin:5px 0 15px 0;">Find official alternatives and verified streams</p>
            <div class="partner-tags">
                <button class="p-tag" onclick="triggerEntityPopup('Methstreams')">Methstreams</button><button class="p-tag" onclick="triggerEntityPopup('Sportsurge')">Sportsurge</button><button class="p-tag" onclick="triggerEntityPopup('Crackstreams')">Crackstreams</button>
            </div>
        </div>

    </div>

    <footer>
        <div class="footer-grid">
            <div class="f-brand">
                <img src="/assets/streameast-logo-hd.jpg" class="logo-img"> <div class="logo-text">Stream<span>East</span></div>
                <div class="f-desc">Hello world</div>
            </div>
            <div>
                <h4 style="color:#fff; margin-bottom:15px;">Quick Links</h4>
                <div class="f-links"><a href="/dmca" class="f-link">DMCA</a><a href="/contact" class="f-link">Contact</a></div>
            </div>
        </div>
        <div class="copyright">Copyright</div>
    </footer>

    <button id="backToTop" class="back-to-top" onclick="window.scrollTo(0,0)">
        <svg viewBox="0 0 24 24"><path d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"/></svg>
    </button>

    <!-- REQ #5: UPDATED SEO SEARCH MODAL -->
    <div id="searchOverlay" class="search-overlay">
        <div class="search-modal-box">
            <div class="search-loader"></div>
            <h3 class="search-keyword-h3">Searching for <span id="sKw"></span> live streams</h3>
            <div class="search-sub-text">Checking availability for "<span id="sKw2"></span>"...</div>
            
            <div id="foundBox" class="found-box">
                <div class="best-alt-msg"><strong>crackstreams.help</strong> is the best official alternative for <span id="sKw3"></span></div>
                <div class="redirect-msg">Redirecting to Homepage...</div>
            </div>
        </div>
    </div>

    <div id="streamModal" class="modal"></div>
    <div id="infoModal" class="modal-info">
        <div class="info-content">
            <button class="close-info" onclick="closeInfoModal()">‚úï</button>
            <div class="info-header">Match Information</div>
            <h2 id="infoTeams">Loading...</h2>
            <div class="info-meta">
                <div class="meta-row"><span>üìÖ Date</span> <span id="infoDate">-</span></div>
                <div class="meta-row"><span>‚è± Status</span> <span id="infoStatus" style="color:var(--brand-primary); font-weight:700;">-</span></div>
            </div>
            <button id="infoWatchBtn" class="btn-watch-lg">üì∫ WATCH STREAM</button>
        </div>
    </div>

    <script>
        const ENABLE_SCHEMAS = { live: false, schedule: false };
        const API_URL = "https://vercelapi-olive.vercel.app/api/sync-nodes";
        const TARGET_COUNTRY = "US"; 
        const PRIORITIES = {"NFL": {"score": 100, "isLeague": true, "hasLink": true}, "NBA": {"score": 95, "isLeague": true, "hasLink": true}, "MLB": {"score": 90, "isLeague": true, "hasLink": true}, "College Football": {"score": 88, "isLeague": true, "hasLink": false}, "College Basketball": {"score": 87, "isLeague": true, "hasLink": false}, "NHL": {"score": 85, "isLeague": true, "hasLink": false}, "UFC": {"score": 80, "isLeague": true, "hasLink": false}, "MMA": {"score": 79, "isLeague": false, "hasLink": false}, "MLS": {"score": 70, "isLeague": true, "hasLink": false}, "Premier League": {"score": 60, "isLeague": true, "hasLink": false}, "Boxing": {"score": 50, "isLeague": false, "hasLink": false}, "Tennis": {"score": 40, "isLeague": false, "hasLink": false}, "Other": {"score": 10, "isLeague": false, "hasLink": false, "isHidden": false}}; 
        const SITE_DOMAIN = "https://crackstreams.help";
        const SHARE_CONFIG = {"excluded": ["dmca", "contact", "about", "privacy"], "counts": {"telegram": "1200", "discord": "800", "reddit": "300", "twitter": "500"}};

        let allMatches = [];
        window.MATCH_DATA = {}; 

        window.addEventListener('DOMContentLoaded', () => {
            highlightActiveMenu();
            renderSocials();
            loadMatches();
        });

        window.addEventListener('scroll', () => {
            const btn = document.getElementById('backToTop');
            if(window.scrollY > 300) btn.classList.add('show');
            else btn.classList.remove('show');
        });

        async function loadMatches() {
            try {
                const res = await fetch(`${API_URL}?country=${TARGET_COUNTRY.toLowerCase()}`);
                const data = await res.json();
                allMatches = data.matches;
                
                if(data.seo) injectDynamicSchema(data.seo);
                
                renderApp(data.matches);
            } catch(e) { console.error(e); }
        }

        function renderApp(matches) {
            // Remove Skeletons
            document.getElementById('live-sk-head').style.display = 'none';
            document.getElementById('live-skeleton').style.display = 'none';
            document.getElementById('upcoming-skeleton').style.display = 'none';

            window.MATCH_DATA = {};
            matches.forEach(m => window.MATCH_DATA[m.id] = m);

            const liveMatches = matches.filter(m => m.is_live);
            const now = Date.now();
            const oneDay = 24 * 60 * 60 * 1000;
            const upcomingMatches = matches.filter(m => !m.is_live && (m.startTimeUnix - now) < oneDay);

            renderLiveSection(liveMatches);
            renderUpcomingGrouped(upcomingMatches);
            
            checkUrlParams();
        }

        function renderLiveSection(matches) {
            const wrapper = document.getElementById('live-content-wrapper');
            const topList = document.getElementById('trending-list');
            const hiddenList = document.getElementById('hidden-live-list');
            const btn = document.getElementById('show-more-live');
            
            if (matches.length === 0) { 
                wrapper.style.display = 'none'; 
                // Hide entire section, placeholder already hidden
                document.getElementById('live-section').style.display = 'none';
                return; 
            }
            wrapper.style.display = 'block';

            topList.innerHTML = ''; hiddenList.innerHTML = ''; btn.style.display='none';
            document.getElementById('live-count').innerText = `‚óè ${matches.length} Live Matches`;

            matches.slice(0, 5).forEach(m => topList.appendChild(createMatchRow(m, null)));
            if (matches.length > 5) {
                matches.slice(5).forEach(m => hiddenList.appendChild(createMatchRow(m, null)));
                btn.style.display = 'block'; btn.innerText = `Show ${matches.length - 5} More Matches ‚ñº`;
                btn.onclick = () => { hiddenList.style.display='block'; btn.style.display='none'; };
            }
        }

        function renderUpcomingGrouped(matches) {
            const container = document.getElementById('upcoming-container');
            container.innerHTML = '';
            
            const allGroups = {};
            matches.forEach(m => {
                const hiddenKey = Object.keys(PRIORITIES).find(k => {
                    if(!PRIORITIES[k].isHidden) return false;
                    const txt = (m.league + " " + m.sport).toLowerCase();
                    return txt.includes(k.toLowerCase());
                });
                if(hiddenKey) return;

                const prioKey = Object.keys(PRIORITIES).find(k => {
                    const txt = (m.league + " " + m.sport).toLowerCase();
                    return txt.includes(k.toLowerCase());
                });

                let groupKey = prioKey || toTitleCase(m.sport || "General");
                let groupScore = prioKey ? PRIORITIES[prioKey].score : 0;
                let isPriority = !!prioKey;
                let hasLink = prioKey ? PRIORITIES[prioKey].hasLink : false;
                let iconKey = prioKey || groupKey;

                if (!allGroups[groupKey]) allGroups[groupKey] = { name: groupKey, score: groupScore, matches: [], hasLink, iconKey, isPriority };
                allGroups[groupKey].matches.push(m);
            });

            const sortedGroups = Object.values(allGroups).sort((a,b) => b.score - a.score);

            sortedGroups.forEach(group => {
                group.matches.sort((a,b) => a.startTimeUnix - b.startTimeUnix);
                createSection(container, group.name, group.matches, group.hasLink, group.iconKey, group.isLeague);
            });
        }

        function createSection(container, title, matches, hasLink, iconKey, isPrioritySection) {
            const section = document.createElement('div');
            section.style.marginBottom = '30px';
            let linkHtml = '';
            if (hasLink) {
                const slug = iconKey.toLowerCase().replace(/ /g, '-').replace(/[^a-z0-9-]/g, '');
                linkHtml = `<a href="/${slug}/" class="sec-right-link">View All ></a>`;
            }
            section.innerHTML = `<div class="sec-head"><div class="sec-title">${getSportIcon(iconKey)} Upcoming ${title}</div>${linkHtml}</div>`;
            const list = document.createElement('div');
            matches.forEach(m => list.appendChild(createMatchRow(m, isPrioritySection ? title : null)));
            section.appendChild(list);
            container.appendChild(section);
        }

        function createMatchRow(m, priorityContext) {
            const div = document.createElement('div');
            div.className = m.is_live ? 'match-row live' : 'match-row';
            
            let timeCol;
            if (m.is_live) timeCol = `<span class="live-txt">LIVE</span><span class="time-sub">${m.status_text || "Now"}</span>`;
            else { 
                const parts = m.formatted_date.split('‚Ä¢'); 
                timeCol = `<span class="time-main">${parts[1] || ''}</span><span class="time-sub">${parts[0]}</span>`; 
            }

            let teamsHtml = '';
            const tA = m.team_a; const tB = m.team_b;
            
            // REQ #10: Force 0.7rem for both single and dual teams
            if (!tB) {
                // Single team (e.g. F1)
                teamsHtml = `<div class="team-name" style="font-size:0.7rem;"><span class="t-logo" style="background:${getColor(m.team_a_letter||'T')}">${m.team_a_letter||'T'}</span> ${tA}</div>`;
            } else {
                // Dual team
                teamsHtml = `
                <div class="team-name" style="font-size:0.7rem;"><span class="t-logo" style="background:${getColor(m.team_a_letter||'T')}">${m.team_a_letter||'T'}</span> ${tA}</div>
                <div class="team-name" style="font-size:0.7rem;"><span class="t-logo" style="background:${getColor(m.team_b_letter||'T')}">${m.team_b_letter||'T'}</span> ${tB}</div>`;
            }

            let tagText = priorityContext ? m.sport.toUpperCase() : (m.league || m.tournament || m.sport);
            let metaHtml = m.is_live ? `<div class="meta-top">${m.live_viewers || 'N/A'}</div>` : `<div class="meta-top" style="color:#aaa; font-weight:400;">${m.status_text}</div>`;
            
            let actionHtml = '';
            if (m.is_live) actionHtml = `<button class="btn-watch" onclick="openPlayer('${m.id}', false)">WATCH <span class="hd-badge">HD</span></button>`;
            else actionHtml = `<button class="btn-watch btn-notify" onclick="this.innerHTML='‚úì SET'; this.classList.add('active');">üîî NOTIFY</button>`;

            div.innerHTML = `<div class="col-time">${timeCol}</div><div class="teams-wrapper"><div class="league-tag">${tagText}</div>${teamsHtml}</div><div class="col-meta">${metaHtml}</div><div class="col-action">${actionHtml}</div>`;
            return div;
        }

        function highlightActiveMenu() {
            const path = window.location.pathname;
            document.querySelectorAll('.nav-links a, .mobile-menu a').forEach(link => {
                if(link.getAttribute('href') === path) link.classList.add('active');
            });
        }

        // REQ #3: Fix Schema Nill Issue
        function injectDynamicSchema(seoData) {
            // Check if backend sent valid data or empty/nill
            if(!seoData || seoData === "nill") return;

            const jsonStr = JSON.stringify(seoData).replace(/https:\/\/example\.com/g, SITE_DOMAIN);
            const parsed = JSON.parse(jsonStr);
            
            Object.values(parsed).forEach(schema => {
                const script = document.createElement('script');
                script.type = 'application/ld+json';
                script.text = JSON.stringify(schema);
                document.head.appendChild(script);
            });
        }

        // REQ #5: Updated Entity Logic
        window.triggerEntityPopup = function(keyword) {
            const ov = document.getElementById('searchOverlay');
            document.getElementById('sKw').innerText = keyword;
            document.getElementById('sKw2').innerText = keyword;
            document.getElementById('sKw3').innerText = keyword;
            
            ov.style.display = 'flex';
            document.getElementById('foundBox').classList.remove('active');
            document.querySelector('.search-loader').style.display = 'block';
            
            setTimeout(() => {
                document.querySelector('.search-loader').style.display = 'none';
                document.getElementById('foundBox').classList.add('active');
                setTimeout(() => window.location.href = "/", 2000);
            }, 1500);
        };

        // REQ #9: Updated Socials with Counts
        function renderSocials() {
            const currentSlug = window.location.pathname.replace(/\//g, '');
            if(SHARE_CONFIG.excluded.includes(currentSlug)) return;

            const sb = document.getElementById('socialSidebar');
            const icons = {
                telegram: '<svg viewBox="0 0 24 24"><path d="M9.78 18.65l.28-4.23 7.68-6.92c.34-.31-.07-.47-.52-.19L7.74 13.3 3.64 12c-.88-.25-.89-.86.2-1.28L19.84 4c.75-.28 1.4.52 1.16 1.76l-2.8 13.2c-.2.9-1.09.9-1.8.6l-5.45-4.06-2.6 2.5c-.3.3-.55.55-1.1.55l.45-3.6z"/></svg>',
                discord: '<svg viewBox="0 0 24 24"><path d="M20.317 4.37a19.791 19.791 0 0 0-4.885-1.515.074.074 0 0 0-.079.037c-.21.375-.444.864-.608 1.25a18.27 18.27 0 0 0-5.487 0 12.64 12.64 0 0 0-.617-1.25.077.077 0 0 0-.079-.037A19.736 19.736 0 0 0 3.677 4.37a.07.07 0 0 0-.032.027C.533 9.046-.32 13.58.099 18.057a.082.082 0 0 0 .031.057 19.9 19.9 0 0 0 5.993 3.03.078.078 0 0 0 .084-.028 14.09 14.09 0 0 0 1.226-1.994.076.076 0 0 0-.041-.106 13.107 13.107 0 0 1-1.872-.892.077.077 0 0 1-.008-.128 10.2 10.2 0 0 0 .372-.292.074.074 0 0 1 .077-.01c3.928 1.793 8.18 1.793 12.062 0a.074.074 0 0 1 .078.01c.118.098.246.198.373.292a.077.077 0 0 1-.006.127 12.299 12.299 0 0 1-1.873.892.077.077 0 0 0-.041.107c.36.698.772 1.362 1.225 1.993a.076.076 0 0 0 .084.028 19.839 19.839 0 0 0 6.002-3.03.077.077 0 0 0 .032-.054c.5-5.177-.838-9.674-3.549-13.66a.061.061 0 0 0-.031-.03z"/></svg>',
                reddit: '<svg viewBox="0 0 24 24"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm4.6 13.7c-2.54 0-4.6-2.06-4.6-4.6 0-.3.04-.6.1-.88-1.55.76-2.6 2.33-2.6 4.15 0 2.54 2.06 4.6 4.6 1.83 0 3.4-.95 4.15-2.6-.28.06-.58.1-.88.1zm-6.17-5.55c0-.94.76-1.7 1.7-1.7s1.7.76 1.7 1.7-.76 1.7-1.7 1.7-1.7-.76-1.7-1.7z"/></svg>',
                twitter: '<svg viewBox="0 0 24 24"><path d="M22.46 6c-.77.35-1.6.58-2.46.69.88-.53 1.56-1.37 1.88-2.38-.83.5-1.75.85-2.72 1.05C18.37 4.5 17.26 4 16 4c-2.35 0-4.27 1.92-4.27 4.29 0 .34.04.67.11.98C8.28 9.09 5.11 7.38 3 4.79c-.37.63-.58 1.37-.58 2.15 0 1.49.75 2.81 1.91 3.56-.71 0-1.37-.2-1.95-.5v.03c0 2.08 1.48 3.82 3.44 4.21a4.22 4.22 0 0 1-1.93.07 4.28 4.28 0 0 0 4 2.98 8.521 8.521 0 0 1-5.33 1.84c-.34 0-.68-.02-1.02-.06C3.44 20.29 5.7 21 8.12 21 16 21 20.33 14.46 20.33 8.79c0-.19 0-.37-.01-.56.84-.6 1.56-1.36 2.14-2.23z"/></svg>',
                copy: '<svg viewBox="0 0 24 24"><path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"/></svg>'
            };

            const actions = {
                telegram: 'https://t.me/share/url?url=' + encodeURIComponent(SITE_DOMAIN),
                twitter: 'https://twitter.com/intent/tweet?text=Watch%20Live%20Sports&url=' + encodeURIComponent(SITE_DOMAIN),
                reddit: 'https://reddit.com/submit?url=' + encodeURIComponent(SITE_DOMAIN),
                discord: '#', 
                copy: '#'
            };

            let html = '';
            ['telegram', 'discord', 'reddit', 'twitter', 'copy'].forEach(p => {
    let onclick = '';
    if(p === 'copy') {
        onclick = `onclick="navigator.clipboard.writeText('${SITE_DOMAIN}'); alert('Link copied!');"`;
    } else if(p === 'discord') {
        onclick = `onclick="alert('Join our Discord!')"`;
    } else {
        onclick = `onclick="window.open('${actions[p]}', '_blank')"`;
    }

    const countHtml = p === 'copy'
        ? '' // ‚úÖ no count for copy
        : `<span class="s-count">${formatCount(SHARE_CONFIG.counts[p])}</span>`;

    html += `
        <div class="social-btn" ${onclick}>
            ${icons[p]}
            ${countHtml}
        </div>
    `;
});

            sb.innerHTML = html;
        }

        function formatCount(num) {
            if(!num) return '0';
            if(num >= 1000) return (num/1000).toFixed(1) + 'k';
            return num;
        }

        function checkUrlParams() {
            const params = new URLSearchParams(window.location.search);
            if(params.get('sport') && window.MATCH_DATA[params.get('sport')]) openPlayer(params.get('sport'), false);
            const hash = window.location.hash.replace('#', '');
            if(hash && window.MATCH_DATA[hash]) openInfoModal(hash);
        }
        function openInfoModal(id) {
            const m = window.MATCH_DATA[id];
            if(!m) return;
            document.getElementById('infoTeams').innerHTML = m.team_b ? `${m.team_a} <span style="color:#666; font-size:0.8em;">vs</span> ${m.team_b}` : m.team_a;
            document.getElementById('infoDate').innerText = m.formatted_date;
            document.getElementById('infoStatus').innerText = m.is_live ? "LIVE NOW üî•" : m.status_text;
            document.getElementById('infoWatchBtn').onclick = () => { closeInfoModal(); openPlayer(id, false); };
            document.getElementById('infoModal').style.display = 'flex';
        }
        function closeInfoModal() { document.getElementById('infoModal').style.display = 'none'; history.replaceState(null, null, ' '); }
        function openPlayer(id, locked) {
            const m = window.MATCH_DATA[id];
            if(!m) return alert("Match expired.");
            window.initPlayer ? window.initPlayer(m, locked) : loadPlayerScript(m, locked);
        }
        function loadPlayerScript(m, locked) {
            const s = document.createElement('script');
            s.src = 'assets/player.js';
            s.onload = () => window.initPlayer(m, locked);
            document.body.appendChild(s);
        }
        function toTitleCase(str) { return str.replace(/\w\S*/g, txt => txt.charAt(0).toUpperCase() + txt.substr(1).toLowerCase()); }
        function getSportIcon(n) { n=(n||"").toLowerCase(); if(n.includes('soccer')||n.includes('premier')) return '‚öΩ'; if(n.includes('basket')||n.includes('nba')) return 'üèÄ'; if(n.includes('football')||n.includes('nfl')) return 'üèà'; if(n.includes('baseball')||n.includes('mlb')) return '‚öæ'; if(n.includes('fight')||n.includes('ufc')||n.includes('box')) return 'ü•ä'; if(n.includes('motor')||n.includes('f1')) return 'üèéÔ∏è'; return 'üèÜ'; }
        function getColor(char) { const c = ['#e53935','#d81b60','#8e24aa','#5e35b1','#3949ab','#1e88e5','#039be5','#00897b','#43a047','#7cb342','#c0ca33','#fdd835','#fb8c00']; return c[char.charCodeAt(0) % c.length]; }
        function toggleMenu() { document.getElementById('mobileMenu').classList.toggle('active'); }
    </script>
</body>
</html>
