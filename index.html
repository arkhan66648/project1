<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <!-- 1. SEO & META TAGS (Injected by Python) -->
    <title>StreamEast - #1 Free Live Sports</title>
    <meta name="description" content="">
    <meta name="keywords" content="StreamEast, NBA Streams, NFL Live, UFC Stream, Free Sports Streaming">
    <meta name="robots" content="index, follow">
    <meta name="theme-color" content="#d00000">
    
    <!-- Social Graph -->
    <meta property="og:title" content="StreamEast - #1 Free Live Sports">
    <meta property="og:description" content="">
    <meta property="og:url" content="https://crackstreams.help/">
    <meta property="og:type" content="website">
    <meta property="og:image" content="assets/logo.png">
    <meta name="twitter:image" content="assets/logo.png">
    <meta name="twitter:card" content="summary_large_image">

    <link rel="canonical" href="https://crackstreams.help/">
    <link rel="icon" href="">

    <!-- ANALYTICS -->
    

    <!-- 2. DYNAMIC SCHEMA (Populated by JS for Live Events) -->
    <script id="dynamic-schema" type="application/ld+json"></script>
    
    <style>
        /* --- CORE VARIABLES (Injected by Python) --- */
        :root {
            --brand-primary: #d00000;
            --brand-dark: #8a0000;
            --status-green: #00e676;
            --accent-gold: #ffd700;
            --bg-body: #050505;
            --bg-glass: rgba(18, 18, 18, 0.85);
            --border: #222;
            --text-main: #ffffff;
            --text-muted: #888;
            --hero-grad: #1a0505;
            --font-main: system-ui;
        }

        /* --- GLOBAL RESET --- */
        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
        body { 
            margin: 0; font-family: var(--font-main), -apple-system, BlinkMacSystemFont, "Segoe UI", "Roboto", sans-serif; 
            background: var(--bg-body); color: var(--text-main); font-size: 14px; 
            padding-bottom: 70px; 
        }
        a { text-decoration: none; color: inherit; transition: 0.2s; }
        button { cursor: pointer; border: none; font-family: inherit; }

        /* --- HEADER --- */
        header {
            background: rgba(5, 5, 5, 0.95); backdrop-filter: blur(10px);
            border-bottom: 1px solid var(--border); height: 60px; width: 100%; 
            position: fixed; top: 0; z-index: 100;
        }
        .header-container {
            max-width: 1100px; margin: 0 auto; height: 100%; padding: 0 15px;
            display: flex; align-items: center; justify-content: space-between;
        }
        
        .logo-link { display: flex; align-items: center; gap: 10px; text-decoration: none; }
        .logo-img { 
            height: 35px; width: 35px; border-radius: 6px; object-fit: cover; 
            box-shadow: 0 0 10px rgba(208,0,0,0.3);
        }
        /* Python injects the Logo HTML here */
        .logo-text { font-size: 1.4rem; font-weight: 900; font-style: italic; letter-spacing: -1px; text-transform: uppercase; line-height: 1; }
        .logo-text span { color: var(--brand-primary); }

        .nav-links { display: none; gap: 20px; font-weight: 600; font-size: 0.85rem; text-transform: uppercase; color: #aaa; }
        .nav-links a:hover { color: white; }
        .hamburger { display: block; font-size: 1.4rem; color: white; background: none; }
        
        .mobile-menu {
            position: fixed; top: 60px; left: 0; width: 100%; background: #0f0f0f;
            border-bottom: 1px solid var(--border); display: none; flex-direction: column; z-index: 99;
        }
        .mobile-menu.active { display: flex; }
        .mobile-menu a { padding: 15px 20px; border-bottom: 1px solid #1f1f1f; font-weight: 600; }

        @media (min-width: 900px) { .nav-links { display: flex; } .hamburger { display: none; } }

        /* --- HERO --- */
        .hero {
            padding: 90px 15px 15px 15px; text-align: center;
            background: radial-gradient(circle at top, var(--hero-grad) 0%, var(--bg-body) 80%);
            border-bottom: 1px solid var(--border);
            display: block;
        }
        .sys-status {
            display: inline-flex; align-items: center; gap: 8px;
            background: rgba(0, 230, 118, 0.08); border: 1px solid rgba(0, 230, 118, 0.2);
            padding: 5px 14px; border-radius: 20px; margin-bottom: 15px;
            font-size: 0.75rem; font-weight: 700; color: var(--status-green);
        }
        .dot { width: 6px; height: 6px; background: var(--status-green); border-radius: 50%; box-shadow: 0 0 8px var(--status-green); animation: pulse 2s infinite; }
        
        h1 { margin: 0 0 20px 0; font-size: 1.8rem; line-height: 1.2; color: white; font-weight: 800; }
        h1 span { color: var(--brand-primary); }

        .cat-scroll { 
            display: flex; gap: 10px; overflow-x: auto; padding: 10px 5px; 
            justify-content: flex-start; scrollbar-width: none; -ms-overflow-style: none;
            max-width: 100%; margin: 0 auto;
        }
        .cat-scroll::-webkit-scrollbar { display: none; }
        
        .cat-pill {
            background: #111; border: 1px solid var(--border);
            padding: 8px 18px; border-radius: 50px; font-weight: 700; font-size: 0.8rem;
            white-space: nowrap; color: #ccc; flex-shrink: 0;
        }
        .cat-pill:hover, .cat-pill.active { border-color: var(--brand-primary); color: white; background: rgba(208,0,0,0.1); }

        /* --- SOCIAL SIDEBARS --- */
        .desktop-social {
            position: fixed; left: 0; top: 50%; transform: translateY(-50%);
            display: none; flex-direction: column; z-index: 90;
            background: rgba(10,10,10,0.8); border: 1px solid var(--border); border-left: 0;
            border-radius: 0 10px 10px 0; overflow: hidden;
        }
        .ds-item { 
            padding: 12px 10px; display: flex; flex-direction: column; align-items: center; 
            cursor: pointer; transition: 0.2s; border-bottom: 1px solid #222; width: 60px;
        }
        .ds-item:last-child { border-bottom: none; }
        .ds-item:hover { background: var(--brand-primary); }
        .ds-item svg { width: 22px; height: 22px; fill: #ddd; transition: 0.2s; }
        .ds-item:hover svg { fill: white; }
        .stat-val { font-size: 0.6rem; font-weight: 700; margin-top: 4px; color: #aaa; }
        .ds-item:hover .stat-val { color: white; }

        .mobile-social {
            position: fixed; bottom: 0; left: 0; width: 100%; height: 55px;
            background: rgba(10,10,10,0.98); backdrop-filter: blur(10px);
            border-top: 1px solid var(--border); display: flex; justify-content: space-around; align-items: center;
            z-index: 999;
        }
        .ms-item { display: flex; flex-direction: column; align-items: center; width: 20%; cursor: pointer; }
        .ms-item svg { width: 20px; height: 20px; fill: #999; }
        .ms-count { font-size: 0.6rem; color: var(--brand-primary); font-weight: 700; background: #222; padding: 2px 6px; border-radius: 10px; margin-top: 3px; }

        @media (min-width: 1000px) { 
            .desktop-social { display: flex; } 
            .mobile-social { display: none; } 
            body { padding-bottom: 0; } 
            .cat-scroll { justify-content: center; } 
        }

        /* --- MATCH TABLES --- */
        .container { max-width: 1000px; margin: 0 auto; padding: 20px 15px; }

        .sec-head { display: flex; justify-content: space-between; align-items: flex-end; margin: 30px 0 12px 0; padding-bottom: 8px; border-bottom: 1px solid #1a1a1a; }
        .sec-title { font-size: 1.1rem; font-weight: 800; color: white; display: flex; align-items: center; gap: 8px; text-transform: uppercase; }
        .live-dot { width: 8px; height: 8px; background: var(--brand-primary); border-radius: 50%; box-shadow: 0 0 10px var(--brand-primary); }
        .sec-right-link { font-size: 0.8rem; font-weight: 600; color: var(--text-muted); cursor: pointer; }
        .sec-right-link:hover { color: var(--brand-primary); text-decoration: underline; }

        .match-row {
            display: grid;
            grid-template-columns: 40px 1fr 65px 60px; 
            align-items: center; gap: 8px;
            background: var(--bg-glass); border: 1px solid var(--border);
            border-radius: 6px; padding: 10px 8px; margin-bottom: 8px;
            position: relative; transition: 0.2s;
        }
        .match-row:hover { border-color: #444; transform: translateY(-2px); }
        .match-row.live { 
            border-left: 3px solid var(--brand-primary); 
            background: linear-gradient(90deg, rgba(208,0,0,0.06) 0%, rgba(20,20,20,0.8) 100%); 
        }

        .col-time { text-align: center; display: flex; flex-direction: column; justify-content: center; gap: 2px; }
        .time-main { font-size: 0.75rem; font-weight: 700; color: white; }
        .time-sub { font-size: 0.6rem; color: #888; }
        .live-txt { color: var(--brand-primary); font-weight: 900; animation: blink 1.5s infinite; font-size: 0.65rem; }

        .col-info { display: flex; flex-direction: column; gap: 3px; min-width: 0; justify-content: center; }
        .league-tag { font-size: 0.6rem; color: #666; font-weight: 700; text-transform: uppercase; }
        .team-name { font-size: 0.85rem; font-weight: 600; color: white; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; display:flex; align-items:center; gap:5px; }

        .col-meta { display: flex; flex-direction: column; align-items: flex-end; gap: 3px; justify-content: center; }
        .meta-top { font-size: 0.7rem; font-weight: 700; color: var(--accent-gold); display: flex; align-items: center; gap: 4px; }
        .meta-bot { font-size: 0.6rem; color: #aaa; border: 1px solid #333; padding: 1px 4px; border-radius: 3px; }

        .col-action { display: flex; justify-content: flex-end; }
        .btn-watch {
            background: var(--brand-primary); color: white; 
            font-size: 0.65rem; font-weight: 800; padding: 8px 10px; 
            border-radius: 4px; width: 100%; text-transform: uppercase;
        }
        .btn-watch:hover { background: var(--brand-dark); }

        @media (min-width: 768px) {
            .match-row { grid-template-columns: 70px 1fr 100px 100px; padding: 15px 20px; gap: 20px; }
            .team-name { font-size: 1rem; }
            .btn-watch { font-size: 0.8rem; padding: 10px 0; }
            .col-meta { gap: 5px; }
        }

        /* --- SEO CONTENT (Injected) --- */
        .entity-intro {
            color: #999; font-size: 0.9rem; line-height: 1.5; text-align: center;
            max-width: 800px; margin: 0 auto 0 auto; padding: 10px;
        }
        .seo-box { 
            background: #0a0a0a; border: 1px solid var(--border); 
            padding: 25px; border-radius: 10px; margin-top: 40px; color:#ccc; 
        }
        .partners { 
            margin-top: 20px; text-align: center; border-top: 1px solid var(--border); padding-top: 20px; 
        }
        .p-tag { display: inline-block; font-size: 0.75rem; color: #555; border: 1px solid #222; padding: 6px 12px; border-radius: 20px; margin: 4px; }
        footer { text-align: center; padding: 40px 20px; color: #444; font-size: 0.75rem; margin-bottom: 50px; }
        
        .video-modal { position: fixed; inset: 0; background: black; z-index: 2000; display: none; flex-direction: column; }
        .vm-head { padding: 10px; background: #111; display: flex; justify-content: flex-end; }
        .vm-close { color: white; font-weight: 700; padding: 5px 15px; background: #333; border-radius: 4px; }
        
        @keyframes blink { 0%, 100% {opacity:1;} 50% {opacity:0.4;} }
        
        /* Team Logo Circle */
        .t-logo { width:18px; height:18px; border-radius:50%; background:#333; display:inline-flex; align-items:center; justify-content:center; font-size:9px; color:#fff; font-weight:bold; }
    </style>
</head>
<body>

    <!-- SIDEBAR ICONS (Static) -->
    <div class="desktop-social">
        <div class="ds-item"><svg viewBox="0 0 24 24"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm4.64 6.8c-.15 1.58-.8 5.42-1.13 7.19-.14.75-.42 1-.68 1.03-.58.05-1.02-.38-1.58-.75-.88-.58-1.38-.94-2.23-1.5-.99-.65-.35-1.01.22-1.59.15-.15 2.71-2.48 2.76-2.69.01-.03.01-.14-.07-.2-.08-.06-.19-.04-.27-.02-.11.02-1.93 1.23-5.46 3.62-.51.35-.98.52-1.4.51-.46-.01-1.35-.26-2.01-.48-.81-.27-1.44-.4-1.38-.85.03-.24.37-.49 1.02-.75 4-.174 6.67-2.9 8.04-3.52 3.83-1.74 4.62-2.05 5.15-2.06.11 0 .37.03.54.17.14.12.18.28.2.45-.02.07-.02.13-.02.24z"/></svg></div>
        <div class="ds-item"><svg viewBox="0 0 24 24"><path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"/></svg></div>
    </div>

    <header>
        <div class="header-container">
            <a href="/" class="logo-link">
                <!-- Python injects image here if set -->
                <img src="assets/logo.png" class="logo-img"> <div class="logo-text">Stream<span>East</span></div> 
            </a>

            <nav class="nav-links">
                
            </nav>
            <button class="hamburger" onclick="toggleMenu()">‚ò∞</button>
        </div>
    </header>

    <div class="mobile-menu" id="mobileMenu">
        
    </div>

    <div class="hero">
        <div class="sys-status"><div class="dot"></div> System Status: Online</div>
        
        <h1>StreamEast - Live Sports</h1>
        <p class="entity-intro"></p>

        <div class="cat-scroll">
            <a href="/nba/" class="cat-pill">√É¬∞√Ç¬ü√Ç¬è√Ç¬Ä NBA</a>
        </div>
    </div>

    <div class="container">

        <!-- PARTNER SEARCH BOX -->
        <div id="searchMsgBox" style="display:none; background: #1a1a1a; border: 1px solid var(--brand-primary); padding: 15px; border-radius: 8px; margin-bottom: 20px; text-align: center;">
            <h3 style="margin:0 0 5px 0; color: white; font-size: 1rem;">Looking for <span id="searchTermDisplay" style="color: var(--brand-primary);"></span>?</h3>
            <p style="margin:0; color: #aaa; font-size: 0.85rem;">StreamEast is the #1 authorized alternative.</p>
        </div>

        <!-- CONTROL BAR -->
        <div style="margin-bottom:20px; display:flex; justify-content:space-between;">
             <div class="sec-title" style="font-size:14px;"><div class="live-dot"></div> Live Schedule</div>
             <select id="countrySelect" onchange="loadMatches()" style="background:#222; color:#fff; border:1px solid #333; padding:5px; border-radius:4px;">
                <option value="US">USA</option>
                <option value="UK">UK</option>
             </select>
        </div>

        <!-- ================= DYNAMIC CONTENT LOADED HERE ================= -->
        <div id="matchContainer">
            <div style="text-align:center; padding:50px; color:#444">Connecting to servers...</div>
        </div>

        <!-- SEO ARTICLE (Injected by Python) -->
        <div class="seo-box">
            
        </div>

    </div>

    <footer>
        &copy; 2025 crackstreams.help. All rights reserved.<br>
    </footer>

    <!-- STREAM MODAL -->
    <div class="video-modal" id="vModal">
        <div class="vm-head"><button class="vm-close" onclick="closeModal()">Close ‚úï</button></div>
        <div id="vContainer" style="flex:1; background:black; display:flex; align-items:center; justify-content:center;"></div>
    </div>

    <script>
        // --- VERCEL BACKEND LOGIC ---
        const API_URL = "https://vercelapi-olive.vercel.app/api/sync-nodes";
        // Python Injects Priorities here for sorting
        const PRIORITIES = {"NFL": 100, "NBA": 95, "UFC": 90, "MLB": 85, "NHL": 80, "NCAA Football": 78, "Soccer": 60, "F1": 50, "Boxing": 70, "Tennis": 40}; 
        let currentStreams = [];

        window.addEventListener('DOMContentLoaded', () => {
            loadMatches();
            // Handle Search query
            const q = new URLSearchParams(window.location.search).get('q');
            if(q) {
                document.getElementById('searchMsgBox').style.display = 'block';
                document.getElementById('searchTermDisplay').innerText = q.toUpperCase();
            }
        });

        async function loadMatches() {
            const country = document.getElementById('countrySelect').value;
            const container = document.getElementById('matchContainer');
            try {
                const res = await fetch(`${API_URL}?country=${country.toLowerCase()}`);
                const data = await res.json();
                
                // Inject Schema
                if(data.seo) document.getElementById('dynamic-schema').text = JSON.stringify(data.seo.live_broadcast || {});
                
                renderMatches(data.matches);

            } catch(e) { container.innerHTML = '<div style="text-align:center; padding:50px">No matches available</div>'; }
        }

        function renderMatches(matches) {
            const container = document.getElementById('matchContainer');
            container.innerHTML = '';
            
            // Group and Sort
            const groups = {};
            matches.forEach(m => { if(!groups[m.sport]) groups[m.sport] = []; groups[m.sport].push(m); });
            const sortedSports = Object.keys(groups).sort((a,b) => (PRIORITIES[b]||50) - (PRIORITIES[a]||50));

            sortedSports.forEach(sport => {
                const header = document.createElement('div');
                header.className = 'sec-head';
                header.innerHTML = `<div class="sec-title">${sport}</div>`;
                container.appendChild(header);

                groups[sport].forEach(m => {
                    const el = document.createElement('div');
                    el.className = m.is_live ? 'match-row live' : 'match-row';
                    const safeStreams = encodeURIComponent(JSON.stringify(m.streams));
                    
                    const timeHTML = m.is_live 
                        ? `<span class="live-txt">LIVE</span>` 
                        : `<span class="time-main">${m.formatted_time}</span>`;

                    const logoA = `<span class="t-logo" style="background:${getColor(m.team_a)}">${m.team_a.charAt(0)}</span>`;
                    const logoB = `<span class="t-logo" style="background:${getColor(m.team_b)}">${m.team_b.charAt(0)}</span>`;

                    el.innerHTML = `
                        <div class="col-time">${timeHTML}</div>
                        <div class="col-info">
                            <div class="league-tag">${m.league}</div>
                            <div class="team-name">${logoA} ${m.team_a}</div>
                            <div class="team-name">${logoB} ${m.team_b}</div>
                        </div>
                        <div class="col-meta"><div class="meta-top">${m.live_viewers ? 'üî• '+m.live_viewers : 'HD'}</div></div>
                        <div class="col-action">
                            <button class="btn-watch" onclick="openStreams('${safeStreams}')">WATCH</button>
                        </div>
                    `;
                    container.appendChild(el);
                });
            });
        }

        function getColor(name) {
            const colors = ['#D00000', '#0056D2', '#008f39', '#7C3AED', '#FFD700', '#ff5722'];
            return colors[name.charCodeAt(0) % colors.length];
        }

        function openStreams(json) {
            const streams = JSON.parse(decodeURIComponent(json));
            const modal = document.getElementById('vModal');
            const ctr = document.getElementById('vContainer');
            ctr.innerHTML = '';
            
            // Simple List of buttons for streams
            const list = document.createElement('div');
            list.style.textAlign = 'center';
            
            if(!streams.length) list.innerHTML = '<span style="color:#fff">No streams found</span>';
            
            streams.forEach(s => {
                const btn = document.createElement('button');
                btn.className = 'btn-watch';
                btn.style.margin = '10px';
                btn.style.fontSize = '14px';
                btn.innerText = `Play ${s.source_name}`;
                btn.onclick = () => {
                     // If direct embed, show iframe. If link, open new tab.
                     if(s.url.includes('http')) window.open(s.url, '_blank');
                     else ctr.innerHTML = `<iframe src="${s.url}" style="width:100%;height:100%;border:0" allow="autoplay;fullscreen"></iframe>`;
                };
                list.appendChild(btn);
            });
            
            if(ctr.innerHTML === '') ctr.appendChild(list);
            modal.style.display = 'flex';
        }

        function closeModal() {
            document.getElementById('vModal').style.display = 'none';
            document.getElementById('vContainer').innerHTML = '';
        }
        
        function toggleMenu() { document.getElementById('mobileMenu').classList.toggle('active'); }
    </script>
</body>
</html>
